<html>
    <head>
        <title>WebGL - Canvas test</title>
        <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" />

        <script type="text/javascript" src="script/glMatrix.js"></script>
        <script type="text/javascript" src="script/callbacks.js"></script>
        <script type="text/javascript" src="script/glCourseBasis.js"></script>
        <script type="text/javascript" src="script/objLoader.js"></script>
        <script type="text/javascript" src="script/cubeMap.js"></script>

        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
            integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
            crossorigin="anonymous" />
    </head>

    <body onload="webGLStart();">
        <div class="main">
			<canvas class="canvas" id="WebGL-test"></canvas>
			<br /><br />

            <div class="settings">
                <p style="text-align: center; color: cadetblue">Joue avec moi !</p>
                <div class="setting-select-cubeMap">
                    <label for="select-cubeMap">CubeMap</label>
                    <select id="select-cubeMap" onchange="setImageTextCubeMap(this.value)">
                        <option value="0" selected>Chateau</option>
                        <option value="1">Space</option>
                        <option value="2">Plage</option>
                    </select>
                </div>

                <div class="setting-select-objet">
                    <label for="select-obj">Objet</label>
                    <select id="select-obj" onchange="setObj(this.value)">
                        <option value="0">Bunny</option>
                        <option value="1">Sphere</option>
                        <option value="2">Porsche</option>
                        <option value="3">Mustang</option>
                        <option value="4" selected>cube</option>
                    </select>
                </div>

                <div class="setting-check-mirroir">
                    <label for="mirroir">Miroir</label>
                    <input type="checkbox" id="mirroir" onchange="setIsMirroir(this.checked)" />
                </div>

                <div class="setting-slider">
                    <label for="indices">Indices de r√©fraction</label>
                    <input type="range" class="indices" name="indices" id="myRange" value="1.3" min="1.0" max="3.0" step="0.1" onchange="handleNi(this.value)" />
                    <input type="number" value="1.3" min="1.0" max="3.0" id="myInput" step="0.1" onchange="handleNi(this.value)" />
                    <label for="colorpicker">Choisie ta couleur </label>
                    <input type="color" id="colorpicker" value="#ffffff" onchange="handleColor(event)" />
                </div>
            </div>
        </div>
        <script>
            var slider = document.getElementById("myRange");
            var input = document.getElementById("myInput");

            const handleNi = (value) => {
                setNi(value);
                slider.value = value;
                input.value = value;
            };


			const hexToRgb = hex =>
			hex.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i
						,(m, r, g, b) => '#' + r + r + g + g + b + b)
				.substring(1).match(/.{2}/g)
				.map(x => parseInt(x, 16))

            function handleColor(ev) {
                const color = ev.target.value;
				colors = hexToRgb(color);
				colors=colors.map(element => 
					element=element/255
				);
            }

            // 1.3 par defaut
            handleNi(1.3);
        </script>
    </body>
</html>
